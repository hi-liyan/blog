---
id: 实现动态数组
title: 实现一个动态数组
---

利用现如今所学的知识，实现一个动态数组。数组是Java中基本的数据结构，它长度固定，我们一般不会直接使用数组。在这里，我们利用之前学到的内容来实现一个简单的动态数组。

下面这个示例完全利用目前学过的内容实现，但还不能称之为最终版本，因为这个数组内部使用的是固定类型的数组，等到后面学习泛型时，可以改造这个代码，让它可以存放任意类型的数据。

```java
public class ArrayList {

    private String[] data;
    private int index;

    public ArrayList(int cap) {
        data = new String[cap];
    }

    public String get(int index) {
        if (index < 0 || index >= this.index) {
            return null;
        }
        return data[index];
    }

    public void add(String s) {
        data[index] = s;
        index++;
        if (index == (int)(data.length * 0.8)) {
            String[] newData = new String[data.length * 2];
            for (int i = 0; i < data.length; i++) {
                newData[i] = data[i];
            }
            data = newData;
        }
    }

    public void removeLast() {
        if (size() == 0) {
            System.out.println("集合为空");
            return;
        }
        remove(index - 1);
    }

    public void remove(int index) {
        if (index < 0 || index >= size()) {
            System.out.println("索引越界");
            return;
        }
        if (size() == 0) {
            System.out.println("集合为空");
            return;
        }
        for (int i = index; i < size() - 1; i++) {
            data[i] = data[i + 1];
        }
        data[--this.index] = null;
        if (this.index == data.length * 0.3) {
            String[] newData = new String[(int)(data.length * 0.5)];
            for (int i = 0; i < newData.length; i++) {
                newData[i] = data[i];
            }
            data = newData;
        }
    }

    public boolean contains(String s) {
        return indexOf(s) != -1;
    }


    public int indexOf(String s) {
        if (size() == 0) {
            return -1;
        }
        for (int i = 0; i < data.length; i++) {
            if (data[i] == s) {
                return i;
            }
        }
        return -1;
    }

    public int size() {
        return index;
    }

    public int capacity() {
        return data.length;
    }

    public void printElems() {
        if (size() == 0) {
            return;
        }
        System.out.print("当前数组元素：");

        for (String datum : data) {
            System.out.print(datum + ", ");
        }
        System.out.print("     元素个数：" + size() + " 容量：" + capacity());
        System.out.println();
    }
}
```

:::warning 小坑
因为目前还没有学到String的`equals`方法，所以，这里的字符串比较使用的`==`。`==`可以用来比较字符串字面值常量，但如果new两个相同内容的字符串比较的话，结果为false。
:::

