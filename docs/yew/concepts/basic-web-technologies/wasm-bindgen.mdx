---
title: 'wasm-bindgen'
sidebar_label: wasm-bindgen
---

[`wasm-bindgen`](https://github.com/rustwasm/wasm-bindgen) æ˜¯ä¸€ä¸ªåº“å’Œå·¥å…·ï¼Œæ—¨åœ¨ä¿ƒè¿› Wasm æ¨¡å—å’Œ JavaScript ä¹‹é—´çš„é«˜çº§äº¤äº’ï¼›å®ƒæ˜¯ç”±
[The Rust and WebAssembly Working Group](https://rustwasm.github.io/) ä½¿ç”¨ Rust æ„å»ºçš„ã€‚

Yew ä½¿ç”¨ `wasm-bindgen` æ¥ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’é€šè¿‡ä¸€ç³»åˆ— createsï¼š

-   [`js-sys`](https://crates.io/crates/js-sys)
-   [`wasm-bindgen`](https://crates.io/crates/wasm-bindgen)
-   [`wasm-bindgen-futures`](https://crates.io/crates/wasm-bindgen-futures)
-   [`web-sys`](https://crates.io/crates/web-sys)

æœ¬èŠ‚å°†ä»é«˜å±‚æ¬¡ä¸Šæ¢è®¨å…¶ä¸­ä¸€äº›åŒ…ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°ç†è§£å’Œä½¿ç”¨ä¸ Yew ç›¸å…³çš„ `wasm-bindgen` APIã€‚å¦‚éœ€æ›´æ·±å…¥åœ°äº†è§£ `wasm-bindgen` åŠå…¶ç›¸å…³çš„åŒ…ï¼Œè¯·æŸ¥çœ‹ [wasm-bindgen æŒ‡å—](https://rustwasm.github.io/docs/wasm-bindgen/)ã€‚

è¦æŸ¥çœ‹ä¸Šè¿° crates çš„æ–‡æ¡£ï¼Œè¯·æŸ¥çœ‹ [`wasm-bindgen docs.rs`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/index.html)ã€‚

:::tip
ä½¿ç”¨ `wasm-bindgen` çš„ doc.rs æœç´¢åŠŸèƒ½ï¼Œå¯ä»¥æ‰¾åˆ°å·²ç»é€šè¿‡ `wasm-bindgen` å¯¼å…¥çš„æµè§ˆå™¨ API å’Œ JavaScript ç±»å‹ã€‚
:::

## [`wasm-bindgen`](https://crates.io/crates/wasm-bindgen)

è¯¥åº“ä¸ºä¸Šè¿°å…¶ä»– crate æä¾›äº†è®¸å¤šæ„å»ºå—ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬åªä¼šæ¶µç›– `wasm-bindgen` crate çš„ä¸¤ä¸ªä¸»è¦æ–¹é¢ï¼Œå³å®å’Œä¸€äº›ä½ ä¼šä¸€éåˆä¸€éçœ‹åˆ°çš„ç±»å‹/ç‰¹æ€§ã€‚

### `#[wasm_bindgen]` å®

`#[wasm_bindgen]` å®æä¾›äº† Rust å’Œ JavaScript ä¹‹é—´çš„æ¥å£ï¼Œä¸ºå®ƒä»¬ä¹‹é—´çš„ç›¸äº’è½¬æ¢æä¾›äº†ä¸€ä¸ªç³»ç»Ÿã€‚
ä½¿ç”¨è¿™ä¸ªå®æ¯”è¾ƒé«˜çº§ï¼Œé™¤éä½ æƒ³ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ JavaScript åº“ï¼Œå¦åˆ™ä¸åº”è¯¥ä½¿ç”¨å®ƒã€‚`js-sys` å’Œ `web-sys` crate
æä¾›äº†é’ˆå¯¹å†…ç½® JavaScript ç±»å‹å’Œæµè§ˆå™¨ API çš„ `wasm-bindgen` å®šä¹‰ã€‚

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥ä½¿ç”¨ `#[wasm-bindgen]` å®å¯¼å…¥ä¸€äº›ç‰¹å®šç‰ˆæœ¬çš„ [`console.log`](https://developer.mozilla.org/en-US/docs/Web/API/Console/log) å‡½æ•°ã€‚

```rust ,no_run
use wasm_bindgen::prelude::*;

// é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ‰‹åŠ¨ç»‘å®šconsole.logï¼Œè€Œä¸ä½¿ç”¨web_sysçš„å¸®åŠ©ã€‚
// åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™#[wasm_bindgen]æ³¨é‡Šï¼Œæˆ‘ä»¬ç¨‹åºçš„æ­£ç¡®æ€§å–å†³äºè¿™äº›æ³¨é‡Šçš„æ­£ç¡®æ€§ï¼
#[wasm_bindgen]
extern "C" {

    // åœ¨è¿™é‡Œä½¿ç”¨ `js_namespace` æ¥ç»‘å®š `console.logï¼ˆ..ï¼‰` è€Œä¸æ˜¯ä»…ç»‘å®š `logï¼ˆ..ï¼‰`
    #[wasm_bindgen(js_namespace = console)]
    fn log(s: &str);

    // `console.log` å…·æœ‰å¤šç§å½¢å¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç»‘å®šå¤šä¸ªç­¾åã€‚
    // è¯·æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ `js_name`ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬å§‹ç»ˆåœ¨ JS ä¸­è°ƒç”¨ `log`ã€‚
    #[wasm_bindgen(js_namespace = console, js_name = log)]
    fn log_u32(a: u32);

    // å¤šä¸ªå‚æ•°ä¹Ÿæ˜¯å¦‚æ­¤!
    #[wasm_bindgen(js_namespace = console, js_name = log)]
    fn log_many(a: &str, b: &str);
}

// ä½¿ç”¨å¯¼å…¥çš„å‡½æ•°ï¼
log("Hello from Rust!");
log_u32(42);
log_many("Logging", "many values!");
```
_è¿™ä¸ªä¾‹å­ä¿®æ”¹è‡ª [1.2 Using console.log of The `wasm-bindgen` Guide](https://rustwasm.github.io/docs/wasm-bindgen/examples/console-log.html)ã€‚_

### Simulating inheritance

JavaScript ç±»ä¹‹é—´çš„ç»§æ‰¿æ˜¯ JavaScript è¯­è¨€çš„ä¸€ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼ŒDOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰å°±æ˜¯å›´ç»•å®ƒè®¾è®¡çš„ã€‚å½“ä½¿ç”¨ `wasm-bindgen` å¯¼å…¥ç±»å‹æ—¶ï¼Œæ‚¨è¿˜å¯ä»¥æ·»åŠ æè¿°å…¶ç»§æ‰¿å…³ç³»çš„å±æ€§ã€‚

åœ¨Rustä¸­ï¼Œè¿™ç§ç»§æ‰¿å…³ç³»ä½¿ç”¨ [`Deref`](https://doc.rust-lang.org/std/ops/trait.Deref.html) å’Œ [`AsRef`](https://doc.rust-lang.org/std/convert/trait.AsRef.html) trait æ¥è¡¨ç¤ºã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æœ‰ä¸‰ä¸ªç±»å‹ `A`ï¼Œ`B` å’Œ `C`ï¼Œå…¶ä¸­ `C` æ‰©å±• `B`ï¼Œè€Œ `B` åˆæ‰©å±• `A`ã€‚

å½“å¯¼å…¥è¿™äº›ç±»å‹æ—¶ï¼Œ`#[wasm-bindgen]` å®å°†ä»¥ä»¥ä¸‹æ–¹å¼å®ç° `Deref` å’Œ `AsRef` ç‰¹å¾ï¼š

-   `C` å¯ä»¥ `Deref` åˆ° `B`
-   `B` å¯ä»¥ `Deref` åˆ° `A`
-   `C` å¯ä»¥ä½œä¸º `AsRef` ä¼ é€’ç»™ `B`
-   `C` & `B` éƒ½å¯ä»¥ä½œä¸º `AsRef` ä¼ é€’ç»™ `A`

è¿™äº›å®ç°ä½¿æ‚¨èƒ½å¤Ÿåœ¨ `C` çš„å®ä¾‹ä¸Šè°ƒç”¨ `A` çš„æ–¹æ³•ï¼Œå¹¶å°† `C` ç”¨ä½œ `&B` æˆ– `&A` ä¸€æ ·ä½¿ç”¨ã€‚

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸ªä½¿ç”¨ `#[wasm-bindgen]` å¯¼å…¥çš„ç±»å‹éƒ½æœ‰ç›¸åŒçš„æ ¹ç±»å‹ï¼Œå¯ä»¥å°†å…¶çœ‹ä½œæ˜¯ä¸Šé¢ç¤ºä¾‹ä¸­çš„ `A`ï¼Œè¿™ä¸ªç±»å‹æ˜¯ [`JsValue`](#jsvalue)ï¼Œå°†åœ¨ä¸‹é¢çš„ç« èŠ‚ä¸­ä»‹ç»ã€‚

_[extends section in The `wasm-bindgen` Guide](https://rustwasm.github.io/docs/wasm-bindgen/reference/attributes/on-js-imports/extends.html)_

### [`JsValue`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/struct.JsValue.html) {#jsvalue}

JsValue æ˜¯ä¸€ä¸ªç”± JavaScript æ‹¥æœ‰çš„å¯¹è±¡çš„è¡¨ç¤ºï¼Œå®ƒæ˜¯ `wasm-bindgen` çš„ä¸€ä¸ªæ ¹åŸºç¡€ç±»å‹ã€‚æ‰€æœ‰æ¥è‡ª `wasm-bindgen` çš„ç±»å‹éƒ½æ˜¯ `JsValue` ç±»å‹ï¼Œ
è¿™æ˜¯å› ä¸º JavaScript æ²¡æœ‰ä¸€ä¸ªå¼ºç±»å‹ç³»ç»Ÿï¼Œæ‰€ä»¥ä»»ä½•æ¥å—ä¸€ä¸ªåä¸º `x` çš„å˜é‡çš„å‡½æ•°å¹¶ä¸å®šä¹‰å®ƒçš„ç±»å‹ï¼Œå› æ­¤ `x` å¯ä»¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ JavaScript å€¼ï¼›å› æ­¤ä½¿ç”¨ `JsValue`ã€‚
å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨æ¥å— `JsValue` çš„å¯¼å…¥å‡½æ•°æˆ–ç±»å‹ï¼Œé‚£ä¹ˆä»»ä½•å¯¼å…¥çš„å€¼éƒ½æ˜¯ _æŠ€æœ¯ä¸Š_ æœ‰æ•ˆçš„ã€‚

`JsValue` å¯ä»¥è¢«å‡½æ•°æ¥å—ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°ä»ç„¶å¯èƒ½åªæ¥å—ç‰¹å®šçš„ç±»å‹ï¼Œè¿™å¯èƒ½å¯¼è‡´ panic - å› æ­¤ï¼Œåœ¨ä½¿ç”¨åŸå§‹çš„ `wasm-bindgen` API æ—¶ï¼Œ
éœ€è¦æ£€æŸ¥å¯¼å…¥çš„ JavaScript çš„æ–‡æ¡£ï¼Œä»¥ç¡®å®šå¦‚æœè¯¥å€¼ä¸æ˜¯æŸç§ç±»å‹æ˜¯å¦ä¼šå¼•å‘å¼‚å¸¸ (panic)ã€‚

_[`JsValue` documentation](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/struct.JsValue.html)._

### [`JsCast`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html) {#JsCast}

Rustæœ‰ä¸€ä¸ªå¼ºå¤§çš„ç±»å‹ç³»ç»Ÿï¼Œè€ŒJavaScriptå´æ²¡æœ‰ğŸ˜ã€‚ä¸ºäº†è®©Rustä¿æŒè¿™ç§å¼ºç±»å‹çš„ç‰¹æ€§å¹¶ä¸”ä»ç„¶æ–¹ä¾¿ï¼Œ
WebAssemblyå°ç»„æƒ³å‡ºäº†ä¸€ä¸ªå¾ˆæ£’çš„traitï¼š`JsCast`ã€‚å®ƒçš„ä½œç”¨æ˜¯å¸®åŠ©æ‚¨ä»ä¸€ä¸ªJavaScriptâ€œç±»å‹â€è½¬æ¢ä¸ºå¦ä¸€ä¸ªï¼Œ
è¿™å¬èµ·æ¥å¾ˆæ¨¡ç³Šï¼Œä½†å®é™…ä¸Šæ„å‘³ç€ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªç±»å‹ï¼Œæ‚¨çŸ¥é“å®ƒæ˜¯å¦ä¸€ä¸ªç±»å‹ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨ `JsCast` çš„å‡½æ•°ä»ä¸€ä¸ªç±»å‹è·³åˆ°å¦ä¸€ä¸ªç±»å‹ã€‚
å½“ä½¿ç”¨`web-sys`ã€`wasm_bindgen`ã€`js-sys`æ—¶ï¼Œäº†è§£è¿™ä¸ªå¾ˆå¥½çš„traitä¼šå¾ˆæœ‰å¸®åŠ© - æ‚¨ä¼šæ³¨æ„åˆ°å¾ˆå¤šç±»å‹ä»è¿™äº›crateä¸­å®ç°äº† `JsCast`ã€‚

`JsCast` æä¾›äº†ä¸¤ç§ç±»å‹çš„è½¬æ¢æ–¹æ³•â€”â€”æ£€æŸ¥å‹å’Œä¸æ£€æŸ¥å‹ã€‚å› æ­¤ï¼Œå¦‚æœåœ¨è¿è¡Œæ—¶ä½ ä¸ç¡®å®šæŸä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œä½ å¯ä»¥å°è¯•è¿›è¡Œç±»å‹è½¬æ¢ï¼Œ
è¿™å°†è¿”å›å¯èƒ½çš„é”™è¯¯ç±»å‹ï¼Œä¾‹å¦‚ [`Option`](https://doc.rust-lang.org/std/option/enum.Option.html) å’Œ
[`Result`](https://doc.rust-lang.org/std/result/enum.Result.html)ã€‚

åœ¨ [`web-sys`](./web-sys.mdx) ä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯ä½ æƒ³è·å–ä¸€ä¸ªäº‹ä»¶çš„ç›®æ ‡å…ƒç´ ã€‚ä½ å¯èƒ½çŸ¥é“ç›®æ ‡å…ƒç´ æ˜¯ä»€ä¹ˆï¼Œ
ä½† [`web_sys::Event`](https://rustwasm.github.io/wasm-bindgen/api/web_sys/struct.Event.html)
APIæ€»æ˜¯è¿”å›ä¸€ä¸ª [`Option<web_sys::EventTarget>`](https://rustwasm.github.io/wasm-bindgen/api/web_sys/struct.Event.html#method.target)ã€‚ä½ éœ€è¦å°†å®ƒè½¬æ¢ä¸ºå…ƒç´ ç±»å‹ï¼Œä»¥ä¾¿è°ƒç”¨å…¶æ–¹æ³•ã€‚

```rust
// need to import the trait.
use wasm_bindgen::JsCast;
use web_sys::{Event, EventTarget, HtmlInputElement, HtmlSelectElement};

fn handle_event(event: Event) {
    let target: EventTarget = event
        .target()
        .expect("I'm sure this event has a target!");

    // maybe the target is a select element?
    if let Some(select_element) = target.dyn_ref::<HtmlSelectElement>() {
        // do something amazing here
        return;
    }

    // if it wasn't a select element then I KNOW it's a input element!
    let input_element: HtmlInputElement = target.unchecked_into();
}
```

[`dyn_ref`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html#method.dyn_ref) æ–¹æ³•æ˜¯ä¸€ç§æ£€æŸ¥è½¬æ¢æ–¹æ³•ï¼Œ
å®ƒè¿”å›ä¸€ä¸ª `Option<&T>`ï¼Œè¿™æ„å‘³ç€å¦‚æœè½¬æ¢å¤±è´¥ï¼ŒåŸå§‹ç±»å‹ä»ç„¶å¯ä»¥ä½¿ç”¨ï¼Œå› æ­¤è¿”å› `None`ã€‚
[`dyn_into`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html#method.dyn_into) æ–¹æ³•ä¼šæ¶ˆè€—selfï¼Œ
æŒ‰ç…§Rustä¸­çš„intoæ–¹æ³•çš„çº¦å®šï¼Œè¿”å›ç±»å‹æ˜¯ `Result<T, Self>`ã€‚å¦‚æœè½¬æ¢å¤±è´¥ï¼ŒåŸå§‹çš„ `Self `å€¼å°†åœ¨ `Err` ä¸­è¿”å›ã€‚æ‚¨å¯ä»¥å†è¯•ä¸€æ¬¡æˆ–å¯¹åŸå§‹ç±»å‹è¿›è¡Œå…¶ä»–æ“ä½œã€‚

_[`JsCast` documentation](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/trait.JsCast.html)._

### [`Closure`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/closure/struct.Closure.html)

`Closure` ç±»å‹æä¾›äº†ä¸€ç§å°† Rust é—­åŒ…ä¼ é€’åˆ° JavaScript çš„æ–¹æ³•ï¼Œä¼ é€’åˆ° JavaScript çš„é—­åŒ…å¿…é¡»å…·æœ‰ `'static` ç”Ÿå‘½å‘¨æœŸä»¥ç¡®ä¿å®‰å…¨ã€‚

è¿™ç§ç±»å‹æ˜¯ä¸€ä¸ª"handle"ï¼Œå› ä¸ºå½“å®ƒè¢«ä¸¢å¼ƒæ—¶ï¼Œå®ƒå°†ä½¿å…¶å¼•ç”¨çš„JSé—­åŒ…æ— æ•ˆã€‚åœ¨ Closure è¢«ä¸¢å¼ƒä¹‹åï¼Œä»»ä½•åœ¨ JS ä¸­ä½¿ç”¨è¯¥é—­åŒ…çš„æ“ä½œéƒ½å°†å¼•å‘å¼‚å¸¸ã€‚

`Closure` ç±»å‹é€šå¸¸åœ¨ä½¿ç”¨ `js-sys` æˆ– `web-sys` API æ—¶ä½¿ç”¨ï¼Œè¿™äº› API æ¥å—ç±»å‹ä¸º [`&js_sys::Function`](https://rustwasm.github.io/wasm-bindgen/api/js_sys/struct.Function.html) çš„å‚æ•°ã€‚
åœ¨ Yew ä¸­ä½¿ç”¨ `Closure` çš„ç¤ºä¾‹å¯ä»¥åœ¨ [Events](../html/events.mdx) é¡µé¢çš„ [Using `Closure` section](../html/events.mdx#using-closure-verbose) ä¸­æ‰¾åˆ°ã€‚


_[`Closure` documentation](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen/closure/struct.Closure.html)._

## [`js-sys`](https://crates.io/crates/js-sys)

`js-sys` crateæä¾›äº†JavaScriptæ ‡å‡†å†…ç½®å¯¹è±¡çš„ç»‘å®š/å¯¼å…¥ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„æ–¹æ³•å’Œå±æ€§ã€‚

è¿™ä¸åŒ…æ‹¬ä»»ä½•Web APIï¼Œå› ä¸ºè¿™æ˜¯ [`web-sys`](./web-sys.mdx) çš„ç”¨é€”ï¼

_[`js-sys` documentation](https://rustwasm.github.io/wasm-bindgen/api/js_sys/index.html)._

## [`wasm-bindgen-futures`](https://crates.io/crates/wasm-bindgen-futures)

`wasm-bindgen-futures` crate ä¸º Rust çš„ [`Future`](https://doc.rust-lang.org/stable/std/future/trait.Future.html) ç±»å‹æä¾›äº†ä¸ JavaScript Promise ç±»å‹çš„æ¡¥æ¥ï¼Œ
å¹¶åŒ…å«å°† Rust Future è½¬æ¢ä¸º JavaScript Promise çš„å·¥å…·ã€‚å½“åœ¨ Rust (wasm) ä¸­å¤„ç†å¼‚æ­¥æˆ–å…¶ä»–é˜»å¡å·¥ä½œæ—¶ï¼Œè¿™å°†éå¸¸æœ‰ç”¨ï¼Œå¹¶æä¾›äº†ä¸ JavaScript äº‹ä»¶å’Œ JavaScript I/O åŸè¯­è¿›è¡Œäº¤äº’çš„èƒ½åŠ›ã€‚

ç›®å‰è¯¥ crate ä¸­æœ‰ä¸‰ä¸ªä¸»è¦æ¥å£:

1. [`JsFuture`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/struct.JsFuture.html) -
   è¯¥ç±»å‹ç”¨ [`Promise`](https://rustwasm.github.io/wasm-bindgen/api/js_sys/struct.Promise.html) æ„é€ ï¼Œ
   å¯ä»¥è¢«ç”¨ä½œ `Future<Output=Result<JsValue, JsValue>>`ã€‚å½“ `Promise` è¢«è§£ææ—¶ï¼Œè¯¥ `Future` å°†è§£æä¸º `Ok`ï¼Œ
   å½“ `Promise` è¢«æ‹’ç»æ—¶ï¼Œè¯¥ `Future` å°†è§£æä¸º `Err`ï¼Œåˆ†åˆ«åŒ…å« `Promise` çš„è§£æå€¼æˆ–æ‹’ç»å€¼ã€‚

2. [`future_to_promise`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.future_to_promise.html) -
   å°†ä¸€ä¸ª Rust çš„ `Future<Output=Result<JsValue, JsValue>>` è½¬æ¢ä¸ºä¸€ä¸ª JavaScript çš„ `Promise`ã€‚
   Future çš„ç»“æœå°†è½¬æ¢ä¸º JavaScript ä¸­çš„ä¸€ä¸ª resolved æˆ– rejected çš„ `Promise`ã€‚

3. [`spawn_local`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.spawn_local.html) -
   åœ¨å½“å‰çº¿ç¨‹ä¸Šå¯åŠ¨ä¸€ä¸ª `Future<Output = ()>`ã€‚è¿™æ˜¯åœ¨ Rust ä¸­è¿è¡Œ `Future` è€Œä¸å°†å…¶å‘é€åˆ° JavaScript çš„æœ€ä½³æ–¹æ³•ã€‚

_[`wasm-bindgen-futures` documentation](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/index.html)._

### [`spawn_local`](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.spawn_local.html)

`spawn_local` æ˜¯åœ¨ Yew ä¸­ä½¿ç”¨ `wasm-bindgen-futures crate` æ—¶æœ€å¸¸ç”¨çš„éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒåœ¨ä½¿ç”¨å…·æœ‰å¼‚æ­¥ API çš„åº“æ—¶å¾ˆæœ‰ç”¨ã€‚

```rust ,no_run
use web_sys::console;
use wasm_bindgen_futures::spawn_local;

async fn my_async_fn() -> String { String::from("Hello") }

spawn_local(async {
    let mut string = my_async_fn().await;
    string.push_str(", world!");
    // console log "Hello, world!"
    console::log_1(&string.into());
});
```

Yew è¿˜åœ¨æŸäº› API ä¸­æ·»åŠ äº†å¯¹ Futures çš„æ”¯æŒï¼Œæœ€å€¼å¾—æ³¨æ„çš„æ˜¯æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ª `callback_future`ï¼Œå®ƒæ¥å—ä¸€ä¸ª `async` å— - å®ƒåœ¨å†…éƒ¨ä½¿ç”¨äº† `spawn_local`ã€‚

_[`spawn_local` documentation](https://rustwasm.github.io/wasm-bindgen/api/wasm_bindgen_futures/fn.spawn_local.html)._
