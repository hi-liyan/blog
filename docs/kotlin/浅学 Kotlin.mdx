---
id: æµ…å­¦ Kotlin
title: ğŸ™‚æµ…å­¦ Kotlin
keywords:
- kotlin
- kotlin ç¼–ç¨‹è¯­è¨€
---

ç°åœ¨åœ¨åšçš„ä¸€ä¸ª Web é¡¹ç›®åç«¯ä½¿ç”¨çš„ Kotlin è¯­è¨€ï¼Œå®ƒå’Œ Java ä¸€æ ·éƒ½æ˜¯ç¼–è¯‘æˆ JVM å­—èŠ‚ç è¿è¡Œåœ¨ JVM ä¸Šã€‚å®ƒè™½ç„¶å’Œ Java æœ‰å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹ï¼Œä½†åœ¨è¯­è¨€å±‚é¢ä¸Šå¢åŠ äº†å¾ˆå¤šç‰¹æ€§ï¼Œç‰¹åˆ«æ˜¯å¯¹å‡½æ•°å¼(Functional)ç¼–ç¨‹èŒƒå¼çš„æ”¯æŒã€‚

æœ¬æ–‡æ˜¯è·Ÿç€ [ã€ŠKotlin å®˜æ–¹æ–‡æ¡£ ä¸­æ–‡ç‰ˆã€‹](https://book.kotlincn.net/) å­¦ä¹ ï¼Œæ•´ç†å‡ºå’Œ Java è¯­æ³•è¯­ä¹‰ä¸Šä¸åŒçš„åœ°æ–¹ã€‚

## æ•°æ®ç±»å‹

### æ•°å€¼

åœ¨ Kotlin ä¸­ï¼Œä¸€åˆ‡çš†å¯¹è±¡ï¼Œåœ¨ Java ä¸­çš„ 8 ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåœ¨ Kotlin ä¸­ä¹Ÿæ˜¯å¯¹è±¡ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ 4 ç§æ•´æ•°ç±»å‹ï¼š

| Kotlin | Java  | å¤§å°     |
|--------|-------|--------|
| Byte   | byte  | 1 byte |
| Short  | short | 2 byte |
| Int    | int   | 4 byte |
| Long   | long  | 8 byte |

Kotlin åœ¨ JVM å¹³å°ä¸­ï¼Œæ•°å€¼å­˜å‚¨çš„æ˜¯ int, double è¿™ç§ Java ç§çš„åŸºæœ¬æ•°å€¼ç±»å‹ã€‚ä½†å½“å·¦å€¼ä¸ºå¯ç©ºå¼•ç”¨æˆ–è€…æ³›å‹æ—¶ï¼Œæ•°å€¼ä¼šè¿›è¡Œè‡ªåŠ¨è£…ç®±ï¼Œç±»æ¯” Java ä¸­çš„ Integer, Long è¿™ç§ã€‚

```kotlin
fun main() {
    val a: Int = 10;
    val b: Int? = 10; // è‡ªåŠ¨è£…ç®±
}
```

åœ¨ Kotlin ä¸­ï¼Œå¯¹ -128 ~ 127 çš„æ•´æ•°è¿›è¡Œäº†å†…å­˜ä¼˜åŒ–ï¼Œå¦‚æœæ˜¯å¯ç©ºå¼•ç”¨ï¼Œå®ƒå¼•ç”¨çš„æ˜¯ç›¸åŒçš„å¯¹è±¡ã€‚

```kotlin
fun main() {
    val a: Int? = 10;
    val b: Int? = 10;

    println(a === b) // å†…å­˜ä¼˜åŒ–ï¼Œå¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼Œæ‰€ä»¥æ‰“å° true

    val c: Int? = 1000;
    val d: Int? = 1000;

    println(c === d) // false
}
```

:::tip == å’Œ === æ¯”è¾ƒæ•°å€¼
**==** åªæ¯”è¾ƒå·¦å³å€¼æ˜¯å¦ç›¸ç­‰ï¼Œæ˜¯æ¯”è¾ƒå€¼çš„ç›¸ç­‰æ€§ï¼›<br/>
**===** æ¯”è¾ƒå·¦å³å€¼æ˜¯å¦æ˜¯åŒä¸€å¯¹è±¡ï¼Œæ˜¯æ¯”è¾ƒå€¼çš„åŒä¸€æ€§ã€‚
:::

<br/>

Kotlin åœ¨æ•°å€¼ç±»å‹è½¬æ¢ä¸Šä¹Ÿä¸ Java æœ‰åŒºåˆ«ï¼ŒKotlin çš„æ•°å€¼ç±»å‹ä¹Ÿæ˜¯å¯¹è±¡ï¼Œè€Œåƒ Int å’Œ Long ä¹‹é—´å¹¶æ²¡æœ‰å®é™…å…³ç³»ï¼Œæ‰€ä»¥ä»–ä»¬ä¹‹é—´ä¸èƒ½è¿›è¡Œéšå¼è½¬æ¢ï¼Œå³ä¾¿æ˜¯å°†è¾ƒå°çš„ç±»å‹èµ‹å€¼ç»™è¾ƒå¤§çš„ç±»å‹ï¼Œè¿™ä¸€ç‚¹å’Œ Java æ˜¯ä¸åŒçš„ã€‚

```kotlin
fun main() {
    val a: Int = 1000;
    val b: Long = a; // ç¼–è¯‘å™¨æŠ¥é”™
}
```

Kotlin çš„æ•°å€¼ç±»å‹æä¾›äº†æ˜¾ç¤ºè½¬æ¢å…¶å®ƒæ•°å€¼ç±»å‹çš„æ–¹æ³•ï¼Œå°±åƒè¿™æ ·ï¼š

```kotlin
fun main() {
    val a: Int = 1000;
    val b: Long = a.toLong(); // æ˜¾ç¤ºç±»å‹è½¬æ¢
}
```

### å­—ç¬¦ä¸²

Kotlin ä¸­çš„åŸå§‹å­—ç¬¦ä¸²ï¼Œç±»ä¼¼å¤šè¡Œå­—ç¬¦ä¸²ï¼Œå®ƒä½¿ç”¨ä¸‰ä¸ªå¼•å· `"""` æŠŠå­—ç¬¦ä¸²å†…å®¹æ‹¬èµ·æ¥ã€‚åŸå§‹å­—ç¬¦ä¸²ä¸­ä¸èƒ½ç”¨è½¬ä¹‰å­—ç¬¦ï¼Œä½†æ˜¯ä¼šä¿ç•™æ¢è¡Œå’Œæ–‡æœ¬å†…å®¹ã€‚

```kotlin
fun main() {
    val text = """
    for (c in "foo")
        print(c)
"""

    println(text)
}
```
ä½¿ç”¨ `trimMargin()` å‡½æ•°ç§»é™¤åŸå§‹å­—ç¬¦ä¸²ä¸­çš„è¾¹ç•Œå‰ç¼€ï¼Œé»˜è®¤çš„è¾¹ç•Œå‰ç¼€æ˜¯ `|`ã€‚

```kotlin
val text = """
|Tell me and I forget.
|Teach me and I remember.
|Involve me and I learn.
|(Benjamin Franklin)
    """.trimMargin()
```

Kotlin ä¸­ä¹Ÿæœ‰å’Œ JavaScript ä¸­ç±»ä¼¼çš„å­—ç¬¦ä¸²æ¨¡æ¿å†™æ³•ï¼Œåœ¨å­—ç¬¦ä¸²å­—é¢å€¼ä¸­ä½¿ç”¨ `${}` æ’å…¥å˜é‡æˆ–è€…è¡¨è¾¾å¼çš„å€¼ï¼Œå¦‚æœåªæ’å…¥ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥çœç•¥ç¾å…ƒç¬¦åæ»¡çš„èŠ±æ‹¬å·ã€‚

```kotlin
fun main() {
    val i = 10;
    println("i = $i") // å­—ç¬¦ä¸²æ¨¡æ¿
}
```

### æ•°ç»„

åœ¨ Kotlin ä¸­ä½¿ç”¨ **Array** ç±»å‹è¡¨ç¤ºæ•°ç»„ï¼Œå®ƒå†…éƒ¨æä¾›äº†ä¸€ä¸ªæ„é€ æ–¹æ³•ç”¨æ¥æ„é€ æ•°ç»„ï¼Œä»¥åŠ getï¼Œset æ–¹æ³•ç”¨æ¥è·å–å’Œä¿®æ”¹æ•°ç»„å…ƒç´ ï¼ˆget set ç¼–è¯‘åä¼šè½¬æ¢ä¸º `[]` è®¿é—®æ•°ç»„å…ƒç´ çš„å½¢å¼ï¼‰ã€‚

```kotlin
public class Array<T> {

    public inline constructor(size: Int, init: (Int) -> T)

    public operator fun get(index: Int): T

    public operator fun set(index: Int, value: T): Unit

    public val size: Int

    public operator fun iterator(): Iterator<T>
}
```


ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼æ„å»ºæ•°ç»„ï¼Œç¬¬ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ `arrayOf()` å‡½æ•°ï¼Œä¼ å…¥å€¼æ¥æ„å»ºæ•°ç»„ã€‚

```kotlin
fun main() {
    val arr = arrayOf(1, 2, 3, 4, 5) // æ¨æ–­ä¸º Array<Int> ç±»å‹
}
```

æˆ–è€…æ˜¯ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œä¼ å…¥æ•°ç»„é•¿åº¦å’Œä¸€ä¸ªå‡½æ•°å‚æ•°ï¼Œå‡½æ•°çš„å®ç°ç”¨æ¥æ„å»ºæ•°ç»„ä¸­çš„å…ƒç´ ã€‚

```kotlin
fun main() {
    val arr = Array(5) { i -> i * i } // å‡½æ•°å‚æ•°ç”¨æ¥æ„é€ æ•°ç»„å…ƒç´ ï¼Œi æ˜¯æ•°ç»„ç´¢å¼•
    arr.forEach { println(it) } // 0 1 4 9 16
}
```

ä¸Šé¢è¿™ç§æ³›å‹æ•°ç»„éƒ½æ˜¯åŒ…è£…ç±»å‹çš„æ•°ç»„ï¼Œç±»æ¯” Java è¯­è¨€ä¸­çš„ Integer[] æˆ–è€… Object[] è¿™æ ·ã€‚ç”±äºæ‹†ç®±è£…ç®±ä¼šå­˜åœ¨è¿è¡Œæ—¶å¼€é”€ï¼Œæ‰€ä»¥ï¼ŒKotlin ä¹Ÿæä¾›äº†åŸç”Ÿç±»å‹æ•°ç»„ã€‚

Kotlin ä¸­çš„åŸç”Ÿæ•°ç»„ç±»å‹ï¼š**ByteArray**, **ShortArray**, **IntArray**, **LongArray** ç­‰ï¼Œç±»æ¯” Java è¯­è¨€ä¸­çš„ `byte[]`, `int[]` è¿™ç§ã€‚

```kotlin
fun main() {
    val intArr = intArrayOf(1, 2, 3, 4, 5) // IntArray ç±»å‹
    val intArr2 = IntArray(5) {i -> i}
}
```

<br/>

å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°ç»„ `Array<Any>`ï¼Œç±»æ¯” Java è¯­è¨€ä¸­çš„ `Object[]` æ•°ç»„ã€‚

```kotlin
fun main() {
    val arr: Array<Any> = arrayOf("one", 2, 3, 4, false)
}
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶ä¸èƒ½å°†å…¶å®ƒç±»å‹çš„æ•°ç»„èµ‹å€¼ç»™ `Array<Any>`ã€‚

```kotlin
fun main() {
    val arrInt: Array<Int> = arrayOf(1,2,3,4,5)
    val arrAny: Array<Any> = arrInt // ç¼–è¯‘å™¨æŠ¥é”™
}
```

### ç±»å‹æ£€æµ‹ä¸ç±»å‹è½¬æ¢

Kotlin ä¸­æä¾›çš„å¾ˆå¤šä¾¿æ·çš„è¯­ä¹‰(è¯­æ³•ç³–)ï¼Œä¾‹å¦‚ç±»å‹æ£€æµ‹ä¸è‡ªåŠ¨ç±»å‹è½¬æ¢æ—¶ï¼ŒKotlin ä¸­ä½¿ç”¨ `is` æˆ–è€… `!is` æ“ä½œç¬¦æ¥åˆ¤æ–­å˜é‡æ˜¯å¦æ˜¯æˆ–è€…ä¸æ˜¯æŸç§ç±»å‹ã€‚å½“åˆ¤æ–­æŸä¸ªå˜é‡æ˜¯æŸç§ç±»å‹æ—¶ï¼Œå¦‚æœä¸ºçœŸï¼Œå˜é‡ä¼šåœ¨ä¸ºçœŸçš„æ¡ä»¶ä¸Šä¸‹æ–‡ä¸­è‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚è¿™æ ·çš„æ“ä½œåœ¨ Java ä¸­éœ€è¦æ˜¾ç¤ºåœ°è¿›è¡Œè½¬æ¢ã€‚

```kotlin
fun main() {
    val s: Any = "Hello, world"

    if (s is String) {
        // åœ¨ä¸ºçœŸæ¡ä»¶ä¸Šä¸‹æ–‡ä¸­ï¼Œs ä¼šéšå¼è½¬æ¢æˆ String ç±»å‹
        println(s.length)
    } else {
        s.length // sä»ç„¶æ˜¯ Any ç±»å‹ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æŠ¥é”™
    }
}
```

è¿™ç§æ¡ä»¶ä¸Šä¸‹æ–‡ä¸ä»…é™äº if ï¼Œè¿˜æœ‰åƒ **&&**, **||** è¿™ç§æ¡ä»¶è¿ç®—ï¼Œæˆ–è€…å…¶å®ƒæ¡ä»¶åˆ†æ”¯ã€‚

```kotlin
fun main() {
    val s: Any = "Hello, world" // ç›¸å½“äº Java ä¸­çš„ Object ç±»å‹

    // || å·¦ä¾§è¡¨è¾¾å¼ä¸º false æ—¶æ‰ä¼šæ‰§è¡Œå³ä¾§çš„è¡¨è¾¾å¼ï¼Œåœ¨å³ä¾§ä¸Šä¸‹æ–‡ä¸­ï¼Œs ä¸€å®šæ˜¯ String ç±»å‹
    if (s !is String || s.length > 0) {}

    // && å·¦ä¾§è¡¨è¾¾å¼ä¸º true æ—¶æ‰ä¼šæ‰§è¡Œå³ä¾§çš„è¡¨è¾¾å¼ï¼Œåœ¨å³ä¾§ä¸Šä¸‹æ–‡ä¸­ï¼Œs ä¸€å®šæ˜¯ String ç±»å‹
    if (s is String && s.length > 0) {}
}
```

è¿™ç§è‡ªåŠ¨ç±»å‹è½¬æ¢åªèƒ½åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹å®Œæˆï¼Œå½“ç¼–è¯‘å™¨èƒ½ä¿è¯å˜é‡åœ¨æ£€æµ‹å’Œä½¿ç”¨è¿‡ç¨‹ä¸­ä¸å¯å˜æ—¶ï¼Œæ‰ä¼šå®Œæˆè‡ªåŠ¨è½¬æ¢ã€‚

<br/>

**â€œä¸å®‰å…¨çš„â€**ç±»å‹è½¬æ¢æ“ä½œç¬¦ **as**ï¼Œä½¿ç”¨ as åœ¨æ— æ³•å®Œæˆç±»å‹è½¬æ¢çš„æƒ…å†µä¸‹ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥æ˜¯â€ä¸å®‰å…¨çš„â€œã€‚

```kotlin
fun main() {
    val s: Any = "Hello, world"
    val s1: String = s as String // å¯ä»¥è½¬æ¢

    val i: Any = 1
    val i1: String = i as String // ä¸å¯è½¬æ¢ï¼ŒæŠ›å‡ºå¼‚å¸¸
}
```

**â€œå®‰å…¨çš„â€**ç±»å‹è½¬æ¢æ“ä½œç¬¦ **as?**ï¼Œä½¿ç”¨ as? åœ¨æ— æ³•å®Œæˆç±»å‹è½¬æ¢çš„æƒ…å†µä¸‹ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥å«åšâ€å®‰å…¨çš„â€œç±»å‹è½¬æ¢æ“ä½œã€‚ä½†ä¼šè¿”å› **null**ï¼Œè¿™å°±è¦æ±‚å·¦å€¼å¿…é¡»æ˜¯å¯ç©ºå˜é‡ã€‚

```kotlin
fun main() {
    val i: Any = 1
    val i1: String? = i as? String // åœ¨æ— æ³•è½¬æ¢çš„åœºæ™¯ä¸‹ä¼šè¿”å› null
    println(i1) // null
}
```

## æµç¨‹æ§åˆ¶

### if è¡¨è¾¾å¼

Kotlin ä¸­çš„ if å’Œ Java ä¸­çš„ if ç”¨æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äº Kotlin ä¸­çš„ if æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒæ˜¯å¯ä»¥å‡ºç°åœ¨èµ‹å€¼ç¬¦å·å³è¾¹çš„ã€‚å¦‚æœ if ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨èµ‹å€¼ç»™å˜é‡æ—¶ï¼Œæ»¡è¶³æ¡ä»¶çš„åˆ†æ”¯ä»£ç å—ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼ä¼šä½œä¸ºæ•´ä¸ª if è¡¨è¾¾å¼çš„è¿”å›å€¼ã€‚å¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œé»˜è®¤è¿”å›å•å…ƒç±»å‹ï¼ˆè¯­ä¹‰ä¸Šè¡¨ç¤ºç©ºï¼‰ã€‚

```kotlin
fun main() {
    val a = 10
    val b = 20
    val max = if (a > b) {
        println("max value: a")
        a
    } else {
        println("max value: b")
        b
    }
}
```

å› ä¸º if æ˜¯è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ Kotlin ä¸­æ²¡æœ‰ä¸‰å…ƒè¿ç®—ç¬¦ã€‚

### when è¡¨è¾¾å¼

Kotlin ä¸­çš„ when è¡¨è¾¾å¼å’Œ Java ä¸­çš„ switch ç±»ä¼¼ï¼Œä½†ç”¨æ³•ä¸Šæ›´åŠ çµæ´»ã€‚

```kotlin
fun main() {
    val a: Any = 10

    when (a) {
        1 -> println("açš„å€¼æ˜¯1")
        in 2..10 -> println("åœ¨æŸä¸ªèŒƒå›´")
        !in 2..10 -> println("ä¸åœ¨æŸä¸ªèŒƒå›´")
        10, 11 -> println("a == 10 or a == 11")
        is String -> {
            val strLen:Int = a.length // åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­ä¼šè‡ªåŠ¨ç±»å‹è½¬æ¢
            println("æ˜¯ String ç±»å‹")
        }
        else -> println("")
    }
}
```

### for å¾ªç¯

for å¾ªç¯å¯ä»¥å¯¹ä»»ä½•æä¾›äº†è¿­ä»£å™¨ï¼ˆå®ç° **Iterable** æ¥å£ï¼‰çš„ç±»å‹è¿›è¡Œéå†ï¼Œç±»ä¼¼ Java ä¸­çš„å¢å¼ºforå¾ªç¯ï¼Œéƒ½æ˜¯ä½¿ç”¨è¿­ä»£å™¨éå†ã€‚

```kotlin
fun main() {
    // éå† IntRange ç±»å‹
    for (i in 1..10) {
        println(i)
    }

    // éå† IntProgression ç±»å‹
    for (i in 10 downTo 1 step 2) {
        print("$i, ")
    }

    for (i in (10 downTo 1).reversed() step 2) {
        print("$i, ")
    }
}
```

ä½¿ç”¨ **indices** éå†ç´¢å¼•ã€‚

```kotlin
fun main() {
    val langs = arrayOf("Java", "JavaScript", "Rust", "Kotlin")

    for (index in langs.indices) {
        println(langs[index])
    }
}
```

ä½¿ç”¨ **withIndex** åœ¨éå†æ—¶æ‹¿åˆ°ç´¢å¼•å’Œå…ƒç´ ã€‚

```kotlin
fun main() {
    val langs = arrayOf("Java", "JavaScript", "Rust", "Kotlin")

    // withIndex éå†æ—¶ä¼šè¿”å›ä¸€ä¸ªå…ƒç»„ï¼Œå…ƒç»„ä¸­æ˜¯å½“å‰éå†çš„ç´¢å¼•å’Œå€¼
    for ((index, value) in langs.withIndex()) {
        println("$index : $value")
    }
}
```


